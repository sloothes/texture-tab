<script>

    (function(){
        var component_ID = {
            type: "tab",
            alpha: true,
            version: 0.1,
            kind: "component",
            name: "texture-tab",
            path: "/texture-tab/index.html",
            description: "create textures from 'textures' cache.",
        };
    })();

</script>

<style>

    .helpers-header h3 { cursor:pointer; }

    #texture-items {
        max-width:475px;
        max-height:660px;
        color:#fff;
        border:none;
        padding:0px;
        background-color:#fff0;
    }

    #textures-display {
        height:170px;
        overflow:auto;
        background:none;
        border-radius:8px;
    }

    .page-btn {
        max-width:45px;
        padding:6px 10px;
    }

</style>

<div class="helpers-header texture-header">
    <h2 style="margin-bottom:20px;">Texture:</h2>
</div>

<div id="texture-viewer" style="width:100%;text-align:center;margin-bottom:20px;">
    <img id="texture-preview" width="290" height="290" style="margin:auto;">
</div>

<div id="outfit-texture-panel" class="tab-content">

    <div>
        <h4 style="height:35px;margin-bottom:20px;">
            <span style="vertical-align:-0.5rem;">Select outfit slot:</span>
            <div style="display:inline-block;width:50%;float:right;">
                <select id="outfit-slot-droplist" class="form-control texture-outfit-droplist" readOnly>
                    <option value="">Select slot:</option>
                    <option value="body">body</option>
                    <option value="eyes">eyes</option>
                    <option value="hairs">hairs</option>
                    <option value="stockings">stockings</option>
                    <option value="underwears">underwears</option>
                    <option value="costume">costume</option>
                    <option value="tshirt">tshirt</option>
                    <option value="trousers">trousers</option>
                    <option value="dress">dress</option>
                    <option value="shoes">shoes</option>
                </select>
            </div>
        </h4>
    </div>

    <div id="texture-items" class="well">

        <h4>Choose texture:
            <div id="counter" class="pull-right small" style="margin-top:4px;color:#ddd;">
                <span id="from">zero</span>
                to <span id="upto">zero</span>
                of <span id="count">none</span>
            </div>
        </h4>

        <div id="texture-pager" class="pager">
            <div style="margin:10px 0px 10px;height:35px;">
                <li class="btn btn-primary get-prev-btn pull-left">&#9668;</li>
                <div class="pager-buttons-holder" style="display:inline;">
                    <a class="btn btn-default page-btn">1</a>
                    <a class="btn btn-default page-btn">2</a>
                    <a class="btn btn-default page-btn">3</a>
                    <a class="btn btn-default page-btn">4</a>
                </div>
                <li class="btn btn-primary get-next-btn pull-right">&#9658;</li>
            </div>

            <div id="textures-display" class="well"></div>

            <div style="margin:10px 0px 10px;height:35px;">
                <li class="btn btn-primary btn-white-outline first-page-btn pull-left" style="margin-right:5px;">First</li>
                <li class="btn btn-primary btn-white-outline get-prev-group-btn pull-left">&#9668;&#9668;</li>
                <li class="btn btn-primary btn-white-outline last-page-btn pull-right" style="margin-left:5px;">Last</li>
                <li class="btn btn-primary btn-white-outline get-next-group-btn pull-right">&#9658;&#9658;</li>
            </div>
        </div>

    </div>

</div>

<div id="texture-controls" class="well" style="background:none;border-radius:8px;height:auto;display:none;">

    <h4 class="texture-checkbox">
        <span style="vertical-align:-0.7rem;">Map:</span>
        <input type="checkbox" id="map" class="form-control pull-right material-checkbox material-texture-checkbox">
    </h4>
    <h4 class="texture-checkbox">
        <span style="vertical-align:-0.7rem;">BumpMap:</span>
        <input type="checkbox" id="bumpMap" class="form-control pull-right material-checkbox material-texture-checkbox">
    </h4>
    <h4 class="texture-checkbox">
        <span style="vertical-align:-0.7rem;">EmissiveMap:</span>
        <input type="checkbox" id="emissiveMap" class="form-control pull-right material-checkbox material-texture-checkbox">
    </h4>
    <h4 class="texture-checkbox">
        <span style="vertical-align:-0.7rem;">MetalnessMap:</span>
        <input type="checkbox" id="metalnessMap" class="form-control pull-right material-checkbox material-texture-checkbox">
    </h4>
    <h4 class="texture-checkbox">
        <span style="vertical-align:-0.7rem;">RoughnessMap:</span>
        <input type="checkbox" id="roughnessMap" class="form-control pull-right material-checkbox material-texture-checkbox">
    </h4>
    <h4 class="texture-checkbox">
        <span style="vertical-align:-0.7rem;">DisplacementMap:</span>
        <input type="checkbox" id="displacementMap" class="form-control pull-right material-checkbox material-texture-checkbox">
    </h4>
    <h4 class="texture-checkbox">
        <span style="vertical-align:-0.7rem;">AOMap:</span>
        <input type="checkbox" id="aoMap" class="form-control pull-right material-checkbox material-texture-checkbox">
    </h4>
    <h4 class="texture-checkbox">
        <span style="vertical-align:-0.7rem;">AlphaMap:</span>
        <input type="checkbox" id="alphaMap" class="form-control pull-right material-checkbox material-texture-checkbox">
    </h4>
    <h4 class="texture-checkbox">
        <span style="vertical-align:-0.7rem;">LightMap:</span>
        <input type="checkbox" id="lightMap" class="form-control pull-right material-checkbox material-texture-checkbox">
    </h4>
    <h4 class="texture-checkbox">
        <span style="vertical-align:-0.7rem;">NormalMap:</span>
        <input type="checkbox" id="normalMap" class="form-control pull-right material-checkbox material-texture-checkbox">
    </h4>

</div>

<script>

(function(){

    const textureHeaderSelector = ".texture-header";
    const helpersHeaderSelector = ".helpers-header";
    const textureControlSelector = "#texture-controls";

    var Signal = signals.Signal;
    var dblclicked = new Signal();

//  Event handlers.
    function onDoubleClickEventHandler( element ){
        if ( $(element).css("display") == "none" ) {
            $(element).slideDown();
        } else {
            $(element).slideUp();
        }
    }

//  Event listeners.
    dblclicked.add(onDoubleClickEventHandler);

//  Dispatch events.
    $(textureHeaderSelector).on("dblclick", function(){
        dblclicked.dispatch( $(textureControlSelector).get(0) );
    });

})();

</script>

<script>

(async function(){

    var cache = await caches.open("textures")
    .then(function(cache){ return cache; });
//  debugMode && console.log({"cache":cache});

    var requests = await cache.keys()
    .then(function(requests){
        return requests;
    });

    debugMode && console.log(requests);

    var urls = [];
    requests.forEach(function(request){
        urls.push(request.url);
    });

    debugMode && console.log({"urls":urls});
























})();

</script>

